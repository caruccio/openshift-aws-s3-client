#!/bin/bash -e

set -x
source $OPENSHIFT_CARTRIDGE_SDK_BASH

case "$1" in
	-v|--version)
		version="$2"
esac

if [ -z "$OPENSHIFT_SECRET_TOKEN" ]; then
	echo "Env var OPENSHIFT_SECRET_TOKEN not found."
	echo "Please run and try again:"
	echo " \$ rhc set-env OPENSHIFT_SECRET_TOKEN=<long-and-random-string-here>"
	exit 1
fi

# setup some paths
ln -fs versions/${version:-0.0.1}/usr
ln -fs versions/${version:-0.0.1}/config
